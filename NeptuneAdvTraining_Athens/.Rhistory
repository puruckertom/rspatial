gauge.neuse <- read.csv(paste(root_dir, "DailyGaugeNeuse.csv", sep=""))
gauge.neuse <- (gauge.neuse[,5:3656])
days2002.g <- gauge.neuse[,366:730]
days2006to2009.g <- gauge.neuse[,1462:2922]
gauge.neuse <- cbind(days2002.g,days2006to2009.g)
colnames(gauge.neuse) <- paste("x",seq(1,1826,1),sep="")
#ID <- seq(1,40,1)
#gauge.neuse <- cbind(ID,gauge.neuse)
#class(gauge.neuse[,2])
#days <- as.character(seq(1,1826,1))
#colnames(radar.neuse) <- c("ID",days)
#colnames(gauge.neuse) <- c("ID",days)
##which days are 0 in both radar and gauge
sums.r <- colSums(radar.neuse)
sums.g <- colSums(gauge.neuse)
sums <- cbind(sums.r,sums.g)
sums <- as.data.frame(sums[-1,])
sums[2:3,"bothsums"] <- NA
sums$bothsums <- sums$sums.r + sums$sums.g
days.0 <- which(sums$bothsums==0,arr.ind=T)
days.0 <- days.0 + 1
gauge.neuse <- gauge.neuse[,-(days.0),drop=FALSE]
radar.neuse <- radar.neuse[,-(days.0),drop=FALSE]
radar.neuse <- as.data.frame(radar.neuse)
#dim(radar.neuse)
#dim(gauge.neuse)
#r.test <- colSums(radar.neuse)
#g.test <- colSums(gauge.neuse)
#sums.test <- cbind(r.test,g.test)
#sums.test <- as.data.frame(sums.test[,-1])
#sums.both.test <- sums.test[,1] + sums.test[,2]
#which(sums.both.test==0)
#dim(days.0)
##create Spatial Points Data Frames
AlbersNAD83 <- CRS("+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs")
Coords.g <- read.csv(paste(root_dir,"CoordsGauge.csv",sep=""),header=TRUE)
Coords.SP.g <- SpatialPoints(Coords.g, proj4string=AlbersNAD83)
Coords.r <- read.csv(paste(root_dir,"MPE_locs.csv",sep=""),header=TRUE)
#dim(Coords.r)
Coords.r <- Coords.r[,2:3]
Coords.SP.r <- SpatialPoints(Coords.r, proj4string=AlbersNAD83)
SPDF.g <- SpatialPointsDataFrame(Coords.SP.g, gauge.neuse, proj4string=AlbersNAD83, match.ID=T)
dim(SPDF.g)
ndays = ncol(SPDF.g)
class(SPDF.g)
#View(gauge.neuse)
SPDF.r <- SpatialPointsDataFrame(Coords.SP.r, radar.neuse, proj4string=AlbersNAD83, match.ID=T)
dim(SPDF.r)
class(SPDF.r)
##print the lotsa pdfs (loop not working, spplot not working)
Ndays <- 1653
variobreaks.g <- seq(from=0, to=125000, l=8) #these choices based on "04-variogram.pdf",
#max separation distance of 250km, average separation distance = 16km,
#variogram valid to half distance gives 8 bins
pdf(paste(output_dir,"poster_variogram.pdf",sep=""), height=8, width=8)
vario1 <- variog(as.geodata(SPDF.g[,72]),breaks=variobreaks.g,op="bin")
vf1 <- variofit(vario1,cov.model="exponential",fix.nugget=FALSE)
par(omi = gridOMI(), mfrow = c(2,1))
par(cex = 0.5, mar = c(5, 4, 1, 2))
par(mfg = c(1, 1))
plot(vario1)
lines(vf1)
dev.off()
vario1 <- variog(as.geodata(SPDF.g[,72]),op="cloud")
vf1 <- variofit(vario1,cov.model="exponential",fix.nugget=FALSE)
plot(vario1)
lines(vf1)
variobreaks <- seq(from=0, to=125000, l=50)
vario1 <- variog(as.geodata(SPDF.g[,72]),breaks=variobreaks,op="bin")
vf1 <- variofit(vario1,cov.model="exponential",fix.nugget=FALSE)
plot(vario1)
lines(vf1)
variobreaks <- seq(from=0, to=125000, l=25)
vario1 <- variog(as.geodata(SPDF.g[,72]),breaks=variobreaks,op="bin")
vf1 <- variofit(vario1,cov.model="exponential",fix.nugget=FALSE)
plot(vario1)
lines(vf1)
variobreaks <- seq(from=0, to=125000, l=15)
vario1 <- variog(as.geodata(SPDF.g[,72]),breaks=variobreaks,op="bin")
vf1 <- variofit(vario1,cov.model="exponential",fix.nugget=FALSE)
plot(vario1)
lines(vf1)
variobreaks <- seq(from=0, to=125000, l=20)
vario1 <- variog(as.geodata(SPDF.g[,72]),breaks=variobreaks,op="bin")
vf1 <- variofit(vario1,cov.model="exponential",fix.nugget=FALSE)
plot(vario1)
lines(vf1)
variobreaks <- seq(from=0, to=125000, l=25)
#pdf(paste(output_dir,"poster_variogram.pdf",sep=""), height=8, width=8)
vario1 <- variog(as.geodata(SPDF.g[,72]),breaks=variobreaks,op="bin")
vf1 <- variofit(vario1,cov.model="exponential",fix.nugget=FALSE)
plot(vario1)
lines(vf1)
plot(vario1, xaxt="n", yaxt="n", xlab=NA)
lines(vf1)
plot(vario1, xaxt="n", yaxt="n", xlab=NA, ylab=NA)
variobreaks <- seq(from=0, to=125000, l=25)
vario1 <- variog(as.geodata(SPDF.g[,72]),breaks=variobreaks,op="bin")
vf1 <- variofit(vario1,cov.model="exponential",fix.nugget=FALSE)
plot(vario1, xaxt="n", yaxt="n", xlab=NA, ylab=NA, pch=16,col="cadetblue")
plot(vario1, xaxt="n", yaxt="n", xlab=NA, ylab=NA, pch=16,col="cadetblue3")
plot(vario1, xaxt="n", yaxt="n", xlab=NA, ylab=NA, pch=16,col="deepskyblue3")
lines(vf1, col="sienna2")
axis(1,at=c(500,1000,5000,10000,25000),labels=c(0.5,1,5,10,25), padj=0.4, cex.axis=0.7)
axis(1,at=c(5000,25000,50000,100000,250000),labels=c(5,25,50,100,205), padj=0.4, cex.axis=0.7)
axis(1,at=c(5000,25000,50000,100000,200000),labels=c(5,25,50,100,205), padj=0.4, cex.axis=0.7)
plot(vario1, xaxt="n", yaxt="n", xlab=NA, ylab=NA, pch=16,col="deepskyblue3")
lines(vf1, col="sienna2")
axis(1,at=c(5000,25000,50000,100000,200000),labels=c(5,25,50,100), padj=0.4, cex.axis=0.7)
axis(1,at=c(5000,25000,50000,100000),labels=c(5,25,50,100), padj=0.4, cex.axis=0.7)
vario1 <- variog(as.geodata(SPDF.g[,72]),breaks=variobreaks,op="bin")
vf1 <- variofit(vario1,cov.model="exponential",fix.nugget=FALSE)
plot(vario1, xaxt="n", yaxt="n", xlab=NA, ylab=NA, pch=16,col="deepskyblue3")
lines(vf1, col="sienna2")
axis(1,at=c(0,25000,50000,75000,100000,125000),labels=c(0,25,50,75,100,125), padj=0.4, cex.axis=0.7)
mtext("distance between points (km)", side=1, padj=-4, cex=0.5)
mtext("distance between points (km)", side=1, padj=0, cex=0.5)
mtext("distance between points (km)", side=1, padj=5, cex=1)
mtext("distance between points (km)", side=1, padj=5, cex=0.8)
vario1 <- variog(as.geodata(SPDF.g[,72]),breaks=variobreaks,op="bin")
vf1 <- variofit(vario1,cov.model="exponential",fix.nugget=FALSE)
plot(vario1, xaxt="n", yaxt="n", xlab=NA, pch=16,col="deepskyblue3")
lines(vf1, lwd=2, col="sienna2")
plot(vario1, xaxt="n",  xlab=NA, ylab=NA, pch=16,col="deepskyblue3") #yaxt="n",
plot(vario1, xaxt="n",  xlab=NA, ylab=NA, pch=16,col="deepskyblue3") #yaxt="n",
lines(vf1, lwd=2, col="sienna2")
vario1 <- variog(as.geodata(SPDF.g[,72]),breaks=variobreaks,op="bin")
vf1 <- variofit(vario1,cov.model="exponential",fix.nugget=FALSE)
plot(vario1, xaxt="n", yaxt="n", xlab=NA, ylab=NA, pch=16,col="deepskyblue3")
lines(vf1, lwd=2, col="sienna2")
axis(1,at=c(0,25000,50000,75000,100000,125000),labels=c(0,25,50,75,100,125), padj=0.4, cex.axis=0.7)
axis(2,at=c(0,50,100,150,200,250),labels=c(0,50,100,150,200,250),padj=0.4,cex.axis=0.7)
mtext("distance between points (km)", side=1, padj=5, cex=0.8)
mtext("semivariance", side=2, padj=-4, cex=0.8)
variobreaks <- seq(from=0, to=125000, l=25)
pdf(paste(output_dir,"poster_variogram.pdf",sep=""), height=8, width=8)
vario1 <- variog(as.geodata(SPDF.g[,72]),breaks=variobreaks,op="bin")
vf1 <- variofit(vario1,cov.model="exponential",fix.nugget=FALSE)
plot(vario1, xaxt="n", yaxt="n", xlab=NA, ylab=NA, pch=16,col="deepskyblue3")
lines(vf1, lwd=2, col="sienna2")
axis(1,at=c(0,25000,50000,75000,100000,125000),labels=c(0,25,50,75,100,125), padj=0.4, cex.axis=0.7)
axis(2,at=c(0,50,100,150,200,250),labels=c(0,50,100,150,200,250),padj=0.4,cex.axis=0.7)
mtext("distance between points (km)", side=1, padj=5, cex=0.8)
mtext("semivariance", side=2, padj=-4, cex=0.8)
dev.off()
variobreaks <- seq(from=0, to=125000, l=25)
pdf(paste(output_dir,"poster_variogram.pdf",sep=""), height=4, width=8)
vario1 <- variog(as.geodata(SPDF.g[,72]),breaks=variobreaks,op="bin")
vf1 <- variofit(vario1,cov.model="exponential",fix.nugget=FALSE)
plot(vario1, xaxt="n", yaxt="n", xlab=NA, ylab=NA, pch=16,col="deepskyblue3")
lines(vf1, lwd=2, col="sienna2")
axis(1,at=c(0,25000,50000,75000,100000,125000),labels=c(0,25,50,75,100,125), padj=0.4, cex.axis=0.7)
axis(2,at=c(0,50,100,150,200,250),labels=c(0,50,100,150,200,250),padj=0.4,cex.axis=0.7)
mtext("distance between points (km)", side=1, padj=5, cex=0.8)
mtext("semivariance", side=2, padj=-4, cex=0.8)
dev.off()
variobreaks <- seq(from=0, to=125000, l=25)
pdf(paste(output_dir,"poster_variogram.pdf",sep=""), height=4, width=6)
vario1 <- variog(as.geodata(SPDF.g[,72]),breaks=variobreaks,op="bin")
vf1 <- variofit(vario1,cov.model="exponential",fix.nugget=FALSE)
plot(vario1, xaxt="n", yaxt="n", xlab=NA, ylab=NA, pch=16,col="deepskyblue3")
lines(vf1, lwd=2, col="sienna2")
axis(1,at=c(0,25000,50000,75000,100000,125000),labels=c(0,25,50,75,100,125), padj=0.4, cex.axis=0.7)
axis(2,at=c(0,50,100,150,200,250),labels=c(0,50,100,150,200,250),padj=0.4,cex.axis=0.7)
mtext("distance between points (km)", side=1, padj=5, cex=0.8)
mtext("semivariance", side=2, padj=-4, cex=0.8)
dev.off()
library("maptools")
install.packages("lubridate")
library("lubridate")
if(.Platform$OS.type=="unix"){
root_dir <- path.expand("~/Dropbox/WRF/")
output_dir <- path.expand("~/Dropbox/WRF/")
}
llCRS <- CRS("+proj=longlat +ellps=WGS84")
neuse.12kbuffer.poly <- readShapePoly(paste(root_dir,"SpatialData/Neuse12kBuffer",sep=""), proj4string=llCRS)
library(geoR)
library(lattice)
library(gridBase)
library(akima)
if(.Platform$OS.type=="unix"){
root_dir <- path.expand("~/Dropbox/WRF/")
output_dir <- path.expand("~/Dropbox/WRF/")
}
#windows
if(.Platform$OS.type=="windows"){
root_dir <- path.expand("d://Dropbox/WRF/")
output_dir <- path.expand("d://Dropbox/WRF/")
}
if(Sys.info()[4] == "D2626UTPURUCKE3"){
root_dir <- path.expand("c://Dropbox/Dropbox/WRF/")
output_dir <- path.expand("c://Dropbox/Dropbox/WRF/")
}
if(Sys.info()[4] == "D2626UTPURUCKE"){
root_dir <- path.expand("c://Dropbox/WRF/")
output_dir <- path.expand("c://Dropbox/WRF/")
}
##paste together 2 neuse radar csvs
radar1 <- read.csv(paste(root_dir,"CSV_Radar/neuse_precip1.csv",sep=""),header=TRUE)
dim(radar1)
length(which(is.na(radar1)))
length(radar1)
radar2 <- read.csv(paste(root_dir,"CSV_Radar/neuse_precip2.csv",sep=""),header=TRUE)
dim(radar2)
length(which(is.na(radar2)))
length(radar2)
radar.neuse <- rbind(radar1,radar2)
radar.neuse <- t(radar.neuse)
summary(radar.neuse)
##delete non-WRF years
days2002.r <- radar.neuse[,366:730]
days2006to2009.r <- radar.neuse[,1462:2922]
radar.neuse <- cbind(days2002.r,days2006to2009.r)
#ID <- seq(1,794,1)
#row.names(radar.neuse) <- seq(1,794,1)
#radar.neuse <- cbind(ID,radar.neuse)
#gauge.neuse <- read.csv(paste(root_dir,"NonzeroGauge5y.csv",sep=""),header=TRUE)
#gauge.neuse <- Nonzero[,-1]
gauge.neuse <- read.csv(paste(root_dir, "DailyGaugeNeuse.csv", sep=""))
gauge.neuse <- (gauge.neuse[,5:3656])
days2002.g <- gauge.neuse[,366:730]
days2006to2009.g <- gauge.neuse[,1462:2922]
gauge.neuse <- cbind(days2002.g,days2006to2009.g)
colnames(gauge.neuse) <- paste("x",seq(1,1826,1),sep="")
#ID <- seq(1,40,1)
#gauge.neuse <- cbind(ID,gauge.neuse)
#class(gauge.neuse[,2])
#days <- as.character(seq(1,1826,1))
#colnames(radar.neuse) <- c("ID",days)
#colnames(gauge.neuse) <- c("ID",days)
##which days are 0 in both radar and gauge
sums.r <- colSums(radar.neuse)
sums.g <- colSums(gauge.neuse)
sums <- cbind(sums.r,sums.g)
sums <- as.data.frame(sums[-1,])
sums[2:3,"bothsums"] <- NA
sums$bothsums <- sums$sums.r + sums$sums.g
days.0 <- which(sums$bothsums==0,arr.ind=T)
days.0 <- days.0 + 1
gauge.neuse <- gauge.neuse[,-(days.0),drop=FALSE]
radar.neuse <- radar.neuse[,-(days.0),drop=FALSE]
radar.neuse <- as.data.frame(radar.neuse)
#dim(radar.neuse)
#dim(gauge.neuse)
#r.test <- colSums(radar.neuse)
#g.test <- colSums(gauge.neuse)
#sums.test <- cbind(r.test,g.test)
#sums.test <- as.data.frame(sums.test[,-1])
#sums.both.test <- sums.test[,1] + sums.test[,2]
#which(sums.both.test==0)
#dim(days.0)
##create Spatial Points Data Frames
AlbersNAD83 <- CRS("+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs")
Coords.g <- read.csv(paste(root_dir,"CoordsGauge.csv",sep=""),header=TRUE)
Coords.SP.g <- SpatialPoints(Coords.g, proj4string=AlbersNAD83)
Coords.r <- read.csv(paste(root_dir,"MPE_locs.csv",sep=""),header=TRUE)
#dim(Coords.r)
Coords.r <- Coords.r[,2:3]
Coords.SP.r <- SpatialPoints(Coords.r, proj4string=AlbersNAD83)
SPDF.g <- SpatialPointsDataFrame(Coords.SP.g, gauge.neuse, proj4string=AlbersNAD83, match.ID=T)
dim(SPDF.g)
ndays = ncol(SPDF.g)
class(SPDF.g)
#View(gauge.neuse)
SPDF.r <- SpatialPointsDataFrame(Coords.SP.r, radar.neuse, proj4string=AlbersNAD83, match.ID=T)
dim(SPDF.r)
class(SPDF.r)
##print the lotsa pdfs (loop not working, spplot not working)
Ndays <- 1653
variobreaks.g <- seq(from=0, to=125000, l=8) #these choices based on "04-variogram.pdf",
vario1 <- variog(as.geodata(SPDF.g[,72]),breaks=variobreaks,op="bin")
vf1 <- variofit(vario1,cov.model="exponential",fix.nugget=FALSE)
plot(vario1, xaxt="n", yaxt="n", xlab=NA, ylab=NA, pch=16,col="deepskyblue3")
lines(vf1, lwd=2, col="deepskyblue4")
axis(1,at=c(0,25000,50000,75000,100000,125000),labels=c(0,25,50,75,100,125), padj=0.4, cex.axis=0.7)
axis(2,at=c(0,50,100,150,200,250),labels=c(0,50,100,150,200,250),padj=0.4,cex.axis=0.7)
mtext("distance between points (km)", side=1, padj=5, cex=0.8)
mtext("semivariance", side=2, padj=-4, cex=0.8)
variobreaks <- seq(from=0, to=125000, l=25)
pdf(paste(output_dir,"poster_variogram.pdf",sep=""), height=4, width=6)
vario1 <- variog(as.geodata(SPDF.g[,72]),breaks=variobreaks,op="bin")
vf1 <- variofit(vario1,cov.model="exponential",fix.nugget=FALSE)
plot(vario1, xaxt="n", yaxt="n", xlab=NA, ylab=NA, pch=16,col="deepskyblue3")
lines(vf1, lwd=2, col="deepskyblue4")
axis(1,at=c(0,25000,50000,75000,100000,125000),labels=c(0,25,50,75,100,125), padj=0.4, cex.axis=0.7)
axis(2,at=c(0,50,100,150,200,250),labels=c(0,50,100,150,200,250),padj=0.4,cex.axis=0.7)
mtext("distance between points (km)", side=1, padj=5, cex=0.8)
mtext("semivariance", side=2, padj=-4, cex=0.8)
dev.off()
pdf(paste(output_dir,"poster_variogram.pdf",sep=""), height=4, width=5)
vario1 <- variog(as.geodata(SPDF.g[,72]),breaks=variobreaks,op="bin")
vf1 <- variofit(vario1,cov.model="exponential",fix.nugget=FALSE)
plot(vario1, xaxt="n", yaxt="n", xlab=NA, ylab=NA, pch=16,col="deepskyblue2")
lines(vf1, lwd=2, col="deepskyblue4")
axis(1,at=c(0,25000,50000,75000,100000,125000),labels=c(0,25,50,75,100,125), padj=0.4, cex.axis=0.7)
axis(2,at=c(0,50,100,150,200,250),labels=c(0,50,100,150,200,250),padj=0.4,cex.axis=0.7)
mtext("distance between points (km)", side=1, padj=5, cex=0.8)
mtext("semivariance", side=2, padj=-4, cex=0.8)
dev.off()
if(.Platform$OS.type=="unix"){
root_dir <- path.expand("~/Dropbox/WRF/")
output_dir <- path.expand("~/Dropbox/WRF/SpatialData/")
}
#windows
if(.Platform$OS.type=="windows"){
root_dir <- path.expand("d://Dropbox/WRF/")
output_dir <- path.expand("d://Dropbox/WRF/SpatialData/")
}
gauge <- read.csv(paste(root_dir, "DailyGaugeNeuse.csv", sep=""))
days2002.g <- gauge[,370:734]
days2006to2009.g <- gauge[,1466:2926]
gauge <- cbind(days2002.g,days2006to2009.g)
colnames(gauge) <- paste("x",seq(1,1826,1),sep="")
#radar
radar1 <- read.csv(paste(root_dir,"CSV_Radar/neuse_precip1.csv",sep=""),header=TRUE)
radar2 <- read.csv(paste(root_dir,"CSV_Radar/neuse_precip2.csv",sep=""),header=TRUE)
radar <- rbind(radar1,radar2)
radar <- t(radar)
days2002.r <- radar[,366:730]
days2006to2009.r <- radar[,1462:2922]
radar <- cbind(days2002.r,days2006to2009.r)
colnames(radar) <- paste("x",seq(1,1826,1),sep="")
##take out 0 days (indiv. datasets)
sums.g <- colSums(gauge)
sums.r <- colSums(radar)
days.0.g <- which(sums.g==0,arr.ind=T)
days.0.r <- which(sums.r==0,arr.ind=T)
nonzero.g.only <- gauge[,-(days.0.g),drop=FALSE]
nonzero.r.only <- as.data.frame(radar[,-(days.0.r),drop=FALSE])
##take out days 0 in both radar and gauge
both.sums <- as.data.frame(cbind(sums.g,sums.r),row.names=FALSE)
both.sums[2:3,"bothsums"] <- NA
both.sums$bothsums <- both.sums$sums.r + both.sums$sums.g
days.0 <- which(both.sums$bothsums==0,arr.ind=T)
days.0 <- days.0 + 1
nonzero.g.both <- gauge[,-(days.0),drop=FALSE]
nonzero.r.both <- as.data.frame(radar[,-(days.0),drop=FALSE])
#add coordinates
coords.g <- read.csv(paste(root_dir,"CoordsGauge.csv",sep=""),header=TRUE)
alldays.g <- cbind(coords.g, gauge)
nonzero.g.only <- cbind(coords.g,nonzero.g.only)
nonzero.g.both <- cbind(coords.g,nonzero.g.both)
coords.r <- read.csv(paste(root_dir,"MPE_locs.csv",sep=""),header=TRUE)
coords.r <- coords.r[,2:3]
alldays.r <- cbind(coords.r, radar)
nonzero.r.only <- cbind(coords.r,nonzero.r.only)
nonzero.r.both <- cbind(coords.r,nonzero.r.both)
##WRF
wrf <- read.csv(paste(root_dir,"wrf_all.csv",sep=""),header=TRUE)
sums.w <- colSums(wrf)
days.0.w <- which(sums.w==0,arr.ind=T)
nonzero.w <- wrf[,-(days.0.w),drop=FALSE]
coords.w <- read.csv(paste(root_dir,"WRF_Coords_Alb.csv",sep=""),header=TRUE)
coords.w <- coords.w[,-1]
colnames(coords.w) <- c("x","y")
alldays.w <- cbind(coords.w, wrf)
nonzero.w <- cbind(coords.w, nonzero.w)
#write full precip files with coordinates and all columns of data
write.csv(alldays.g,row.names=FALSE, file=paste(root_dir"FullPrecipFiles/alldays_g.csv",sep=""))
write.csv(alldays.r,row.names=FALSE, file=paste(root_dir,"FullPrecipFiles/alldays_r.csv",sep=""))
write.csv(alldays.w,row.names=FALSE, file=paste(root_dir,"FullPrecipFiles/alldays_w.csv",sep=""))
write.csv(nonzero.g.only,row.names=FALSE,file=paste(root_dir,"FullPrecipFiles/nonzero_g_only.csv",sep=""))
write.csv(nonzero.r.only,row.names=FALSE,file=paste(root_dir,"FullPrecipFiles/nonzero_r_only.csv",sep=""))
write.csv(nonzero.g.both,row.names=FALSE,file=paste(root_dir,"FullPrecipFiles/nonzero_g_both.csv",sep=""))
write.csv(nonzero.r.both,row.names=FALSE,file=paste(root_dir,"FullPrecipFiles/nonzero_r_both.csv",sep=""))
write.csv(nonzero.w,row.names=FALSE,file=paste(root_dir,"FullPrecipFiles/nonzero_w.csv",sep=""))
write.csv(alldays.g,row.names=FALSE, file=paste(root_dir,"FullPrecipFiles/alldays_g.csv",sep=""))
ngauge <- 40
nradar <- 794
nwrf <- 116
totals.g <- matrix(data=NA,nrow=ngauge,ncol=6)
for(i in 1:ngauge){
totals.g[i,1] <- rowSums(gauge[i,1:365])
totals.g[i,2] <- rowSums(gauge[i,366:790])
totals.g[i,3] <- rowSums(gauge[i,791:1095])
totals.g[i,4] <- rowSums(gauge[i,1096:1461])
totals.g[i,5] <- rowSums(gauge[i,1462:1826])
totals.g[i,6] <- rowSums(gauge[i,])
}
colnames(totals.g) <- c("sum2002","sum2006","sum2007","sum2008","sum2009","total")
View(totals.g)
if(.Platform$OS.type=="unix"){
root_dir <- path.expand("~/Dropbox/WRF/")
output_dir <- path.expand("~/Dropbox/WRF/SpatialData/")
}
#windows
if(.Platform$OS.type=="windows"){
root_dir <- path.expand("d://Dropbox/WRF/")
output_dir <- path.expand("d://Dropbox/WRF/SpatialData/")
}
gauge <- read.csv(paste(root_dir, "DailyGaugeNeuse.csv", sep=""))
days2002.g <- gauge[,370:734]
days2006to2009.g <- gauge[,1466:2926]
gauge <- cbind(days2002.g,days2006to2009.g)
colnames(gauge) <- paste("x",seq(1,1826,1),sep="")
radar1 <- read.csv(paste(root_dir,"CSV_Radar/neuse_precip1.csv",sep=""),header=TRUE)
radar2 <- read.csv(paste(root_dir,"CSV_Radar/neuse_precip2.csv",sep=""),header=TRUE)
radar <- rbind(radar1,radar2)
radar <- t(radar)
days2002.r <- radar[,366:730]
days2006to2009.r <- radar[,1462:2922]
radar <- cbind(days2002.r,days2006to2009.r)
colnames(radar) <- paste("x",seq(1,1826,1),sep="")
sums.g <- colSums(gauge)
sums.r <- colSums(radar)
days.0.g <- which(sums.g<=0.5,arr.ind=T)
days.0.r <- which(sums.r<=0.5,arr.ind=T)
nonzero.g.only <- gauge[,-(days.0.g),drop=FALSE]
nonzero.r.only <- as.data.frame(radar[,-(days.0.r),drop=FALSE])
days.0.g <- which(sums.g<=1.0,arr.ind=T)
sums.g <- colSums(gauge)
sums.r <- colSums(radar)
days.0.g <- which(sums.g<=1.0,arr.ind=T)
days.0.g <- which(sums.g<=0.5,arr.ind=T)
days.0.g <- which(sums.g<=1.0,arr.ind=T)
days.0.g <- which(sums.g<=0.5,arr.ind=T)
nonzero.g.only <- gauge[,-(days.0.g),drop=FALSE]
nonzero.r.only <- as.data.frame(radar[,-(days.0.r),drop=FALSE])
both.sums <- as.data.frame(cbind(sums.g,sums.r),row.names=FALSE)
both.sums[2:3,"bothsums"] <- NA
both.sums$bothsums <- both.sums$sums.r + both.sums$sums.g
days.0 <- which(both.sums$bothsums<=0.5,arr.ind=T)
days.0 <- days.0 + 1
nonzero.g.both <- gauge[,-(days.0),drop=FALSE]
nonzero.r.both <- as.data.frame(radar[,-(days.0),drop=FALSE])
coords.g <- read.csv(paste(root_dir,"CoordsGauge.csv",sep=""),header=TRUE)
alldays.g <- cbind(coords.g, gauge)
nonzero.g.only <- cbind(coords.g,nonzero.g.only)
nonzero.g.both <- cbind(coords.g,nonzero.g.both)
coords.r <- read.csv(paste(root_dir,"MPE_locs.csv",sep=""),header=TRUE)
coords.r <- coords.r[,2:3]
alldays.r <- cbind(coords.r, radar)
nonzero.r.only <- cbind(coords.r,nonzero.r.only)
nonzero.r.both <- cbind(coords.r,nonzero.r.both)
wrf <- read.csv(paste(root_dir,"wrf_all.csv",sep=""),header=TRUE)
sums.w <- colSums(wrf)
days.0.w <- which(sums.w==0,arr.ind=T)
days.0.w <- which(sums.w<=0,arr.ind=T)
days.0.w <- which(sums.w<=0.5,arr.ind=T)
nonzero.w <- wrf[,-(days.0.w),drop=FALSE]
coords.w <- read.csv(paste(root_dir,"WRF_Coords_Alb.csv",sep=""),header=TRUE)
coords.w <- coords.w[,-1]
colnames(coords.w) <- c("x","y")
alldays.w <- cbind(coords.w, wrf)
nonzero.w <- cbind(coords.w, nonzero.w)
write.csv(alldays.g,row.names=FALSE, file=paste(root_dir,"FullPrecipFiles/alldays_g.csv",sep=""))
write.csv(alldays.r,row.names=FALSE, file=paste(root_dir,"FullPrecipFiles/alldays_r.csv",sep=""))
write.csv(alldays.w,row.names=FALSE, file=paste(root_dir,"FullPrecipFiles/alldays_w.csv",sep=""))
write.csv(nonzero.g.only,row.names=FALSE,file=paste(root_dir,"FullPrecipFiles/nonzero_g_only.csv",sep=""))
write.csv(nonzero.r.only,row.names=FALSE,file=paste(root_dir,"FullPrecipFiles/nonzero_r_only.csv",sep=""))
write.csv(nonzero.g.both,row.names=FALSE,file=paste(root_dir,"FullPrecipFiles/nonzero_g_both.csv",sep=""))
write.csv(nonzero.r.both,row.names=FALSE,file=paste(root_dir,"FullPrecipFiles/nonzero_r_both.csv",sep=""))
write.csv(nonzero.w,row.names=FALSE,file=paste(root_dir,"FullPrecipFiles/nonzero_w.csv",sep=""))
ngauge <- 40
nradar <- 794
nwrf <- 116
totals.g <- matrix(data=NA,nrow=ngauge,ncol=6)
for(i in 1:ngauge){
totals.g[i,1] <- rowSums(gauge[i,1:365])
totals.g[i,2] <- rowSums(gauge[i,366:790])
totals.g[i,3] <- rowSums(gauge[i,791:1095])
totals.g[i,4] <- rowSums(gauge[i,1096:1461])
totals.g[i,5] <- rowSums(gauge[i,1462:1826])
totals.g[i,6] <- rowSums(gauge[i,])
}
colnames(totals.g) <- c("sum2002","sum2006","sum2007","sum2008","sum2009","total")
totals.g <- cbind(coords.g,totals.g)
write.csv(totals.g,row.names=FALSE,file=paste(root_dir,"annual_g.csv",sep=""))
radar <- as.data.frame(radar)
totals.r <- matrix(data=NA,nrow=nradar,ncol=6)
for(i in 1:nradar){
totals.r[i,1] <- rowSums(radar[i,1:365],na.rm=TRUE)
totals.r[i,2] <- rowSums(radar[i,366:790],na.rm=TRUE)
totals.r[i,3] <- rowSums(radar[i,791:1095],na.rm=TRUE)
totals.r[i,4] <- rowSums(radar[i,1096:1461],na.rm=TRUE)
totals.r[i,5] <- rowSums(radar[i,1462:1826],na.rm=TRUE)
totals.r[i,6] <- rowSums(radar[i,],na.rm=TRUE)
}
colnames(totals.r) <- c("sum2002","sum2006","sum2007","sum2008","sum2009","total")
totals.r <- cbind(coords.r,totals.r)
write.csv(totals.r,row.names=FALSE,file=paste(root_dir,"annual_r.csv",sep=""))
totals.w <- matrix(data=NA,nrow=nwrf,ncol=6)
for(i in 1:nwrf){
totals.w[i,1] <- rowSums(wrf[i,1:365])
totals.w[i,2] <- rowSums(wrf[i,366:790])
totals.w[i,3] <- rowSums(wrf[i,791:1095])
totals.w[i,4] <- rowSums(wrf[i,1096:1461])
totals.w[i,5] <- rowSums(wrf[i,1462:1826])
totals.w[i,6] <- rowSums(wrf[i,])
}
colnames(totals.w) <- c("sum2002","sum2006","sum2007","sum2008","sum2009","total")
totals.w <- cbind(coords.w,totals.w)
write.csv(totals.w,row.names=FALSE,file=paste(root_dir,"annual_w.csv",sep=""))
ave5143 <- mean(4.84,4.84,4.89,4.74,4.74,4.79,4.89,4.89,4.89,4.74)
ave5144 <- mean(4.95,4.84,4.84,4.83,4.79,4.79,4.89,4.79,4.95,4.84)
ave5144 <- mean(4.95,4.84,4.84,4.83,4.79,4.79,4.89,4.79,4.95,4.84)
print ave1543
print(ave1543)
ave5143 <- mean(4.84,4.84,4.89,4.74,4.74,4.79,4.89,4.89,4.89,4.74)
print(ave1543)
print(ave5143)
ave5144 <- mean(4.95,4.84,4.84,4.83,4.79,4.79,4.89,4.79,4.95,4.84)
print(ave5144)
ave5143 <- c(4.84,4.84,4.89,4.74,4.74,4.79,4.89,4.89,4.89,4.74)
ave5143 <-mean(ave5143)
ave5144 <- c(4.95,4.84,4.84,4.83,4.79,4.79,4.89,4.79,4.95,4.84)
ave5144 <- mean(ave5144)
ave5145 <- c(4.89,4.89,4.94,4.78,4.78,4.78,4.89,4.94,4.94,4.83)
ave5145 <- mean(ave5145)
ave5146 <- c(4.83,4.83,4.82,4.67,4.78,4.67,4.83,4.83,4.76,4.72)
ave5146 <- c(4.83,4.83,4.82,4.67,4.78,4.67,4.83,4.83,4.76,4.72)
ave5146 <- mean(ave5146)
